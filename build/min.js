/**
https://github.com/FelixVogel/Matrix
Copyright (c) 2020 Felix Vogel

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.
*/
var Utility;(function(t){var e=function(){function n(t,e,r,a){if(a===void 0){a=255}this.r=Math.max(0,Math.min(255,t));this.g=Math.max(0,Math.min(255,e));this.b=Math.max(0,Math.min(255,r));this.a=Math.max(0,Math.min(255,a))}n.fromRGBA=function(t,e,r,a){if(a===void 0){a=255}return new n(t,e,r,a)};n.fromHex=function(t){if(!t.match(/^#(:?[0-9a-fA-F]{2}){1,3}$/g))return null;var e,r,a;t=t.substr(1);for(var n=0;n<t.length;n+=2){var i=parseInt(t.substr(n,2),16);switch(n){case 0:{e=i;break}case 2:{r=i;break}case 4:{a=i;break}default:break}}return this.fromRGBA(e,r,a)};n.prototype.toRGBA=function(t){if(t===void 0){t=this.a}return"rgba("+this.r+", "+this.g+", "+this.b+", "+t+")"};n.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};n.prototype.toHex=function(){return"#"+((this.r<16?"0":"")+this.r.toString(16))+((this.g<16?"0":"")+this.g.toString(16))+((this.b<16?"0":"")+this.b.toString(16))};return n}();t.Color=e;function r(t,e){for(var r=0,a=t.length;r<a;r++){e(t[r],r)}}t.forEach=r;function a(t){t()}t.capsule=a})(Utility||(Utility={}));var Color=Utility.Color;var forEach=Utility.forEach;var capsule=Utility.capsule;capsule(function(){var i={baseColor:Color.fromHex("#44ff00"),speed:1,gradientType:0,gradientInterval:1,lineLength:14,resetOnFocus:true,rotation:0};var t=JSON.parse(document.querySelector('script[type="matrix-config"]').innerHTML);var o=document.querySelector(t.canvas?t.canvas:"#matrix-canvas");var h=o.getContext("2d");var s=[];var l=[];var e=function(t){if(t===null||t.length===0)t="ｦｱｳｴｵｶｷｹｺｻｼｽｾｿﾀﾂﾃﾅﾆﾇﾈﾊﾋﾎﾏﾐﾑﾒﾓﾔﾕﾗﾘﾜ日(+*;)-|2589Z";s=[];for(var e=0,r=t.length;e<r;e++){s.push({offsetX:Math.floor(6-h.measureText(t[e]).width/2),char:t[e]})}};var f=function(t,e,r,a,n){if(n===void 0){n="#000000"}h.fillStyle=n;h.fillRect(t,e,r,a)};var c=function(t,e,r){var a=Math.max(.05,Math.min(.5,Math.random()));if(i.gradientType!==0&&r)h.fillStyle="hsla("+r.hsv+", 100%, 50%, "+a+")";else h.fillStyle=i.baseColor.toRGBA(a);h.fillRect(t+5,e+4,2,2)};var u=function(){return{letters:0,max:Math.floor(Math.random()*(i.lineLength/2))+i.lineLength/2,letterY:10,erasing:false,eraseY:0,delay:Math.floor(Math.random()*8e3)+2e3}};var n=function(t){var e={x:t,interval:Math.floor(250*Math.random())+150,hsv:0,items:[u()]};l.push(e)};var v=function(t){switch(t){case 0:{i.gradientType=0;forEach(l,function(t){return t.hsv=0});break}case 1:{i.gradientType=1;forEach(l,function(t){return t.hsv=0});break}case 2:{i.gradientType=2;forEach(l,function(t){return t.hsv=360*(t.x/o.width)});break}}};var d=function(){l=[];for(var t=1,e=o.width;t<e;t+=12){if(t+12>e)break;for(var r=0,a=o.height;r<a;r+=12)c(t,r);n(t)}v(i.gradientType)};var r=function(t){i.rotation=t;o.width=window.innerWidth;o.height=window.innerHeight;o.style["transform"]="rotateZ("+t+"deg)";var e=o.getBoundingClientRect();var r=e.right-e.left;var a=e.bottom-e.top;o.width=r;o.height=a;o.style["transform"]="translate("+(window.innerWidth-r)/2+"px, "+(window.innerHeight-a)/2+"px) rotateZ("+t+"deg)";d()};var g=function(t){o.width=window.innerWidth;o.height=window.innerHeight;r(i.rotation)};capsule(function(){i.baseColor=Color.fromHex(t.baseColor?t.baseColor:"#44ff00");i.speed=Math.max(1,Math.min(16,t.speed?t.speed:2));i.gradientType=Math.min(2,Math.max(0,t.gradientType?t.gradientType:0));i.gradientInterval=Math.max(1,Math.min(16,t.gradientInterval?t.gradientInterval:2));i.lineLength=Math.min(32,Math.max(2,t.lineLength?t.lineLength:32));e(t.symbols?t.symbols:"ｦｱｳｴｵｶｷｹｺｻｼｽｾｿﾀﾂﾃﾅﾆﾇﾈﾊﾋﾎﾏﾐﾑﾒﾓﾔﾕﾗﾘﾜ日(+*;)-|2589Z");i.rotation=Math.min(360,Math.max(0,t.rotation?t.rotation:0))});var a=function(){h.scale(1.2,1.2);g();window.addEventListener("resize",g);var r=function(r){var a=false;forEach(r.items,function(t){if(t.delay<=0){f(r.x,t.letterY,12,12);if(i.gradientType!==0)h.strokeStyle="hsl("+r.hsv+", 100%, 50%)";else h.strokeStyle=i.baseColor.toRGB();var e=s[Math.floor(Math.random()*s.length)];h.strokeText(e.char,r.x+e.offsetX,t.letterY);t.letterY+=12;if(t.letters>=t.max&&!t.erasing){t.erasing=true;a=true}else{t.letters+=1}if(t.erasing){f(r.x,t.eraseY,12,12);c(r.x,t.eraseY,r);t.eraseY+=12}}else{t.delay-=250}});if(a)r.items.push(u());r.items=r.items.filter(function(t){return t.eraseY<o.height});f(r.x,0,12,o.height,"rgba(0, 0, 0, 0.1)")};var a=0;var n=function(t){var e=t-a;forEach(l,function(t){if(i.gradientType!==0){t.hsv+=e/100*i.gradientInterval;if(t.hsv>=360)t.hsv=0}t.interval-=e*i.speed;if(t.interval<=0){r(t);t.interval=Math.floor(250*Math.random())+150}});a=t;window.requestAnimationFrame(n)};a=performance.now();window.requestAnimationFrame(n)};a()});